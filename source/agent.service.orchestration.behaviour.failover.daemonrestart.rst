Daemon restart
--------------

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | Restart daemon A. Transition to init before :kw:`maintenance_grace_period` + :kw:`ready_period`                   |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               | Services instances are not stopped. The daemon          |                                                         |
|                        | announces maintenance state.                            |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | Restart daemon A. Transition to init after :kw:`maintenance_grace_period` + :kw:`ready_period`                    |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running` stonith :c-green:`configured` |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               | Services instances are not stopped. The daemon          | Service starts after :kw:`maintenance_grace_period` +   |
|                        | announces maintenance state.                            | :kw:`ready_period`. Stonith kills A.                    |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-red:`down`                                           | :c-green:`up`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | Restart daemon A                                                                                                  |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down` :c-blue:`frozen`                          |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               | Services instances are not stopped. The daemon          |                                                         |
|                        | announces maintenance state.                            |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | Restart daemon A                                                                                                  |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running` :c-blue:`frozen`              |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               | Services instances are not stopped. The daemon          |                                                         |
|                        | announces maintenance state.                            |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | Restart daemon A                                                                                                  |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-red:`not running`                             |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               | Services instances are not stopped. The daemon          |                                                         |
|                        | announces maintenance state.                            |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

