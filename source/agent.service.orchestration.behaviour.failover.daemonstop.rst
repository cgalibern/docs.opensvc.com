Daemon Stop
-----------

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | Stop daemon on node A                                                                                             |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
|                        |                                                         | stonith :c-green:`configured`                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               | Services instances are not stopped. The daemon          | Service starts after :kw:`maintenance_grace_period` +   |
|                        | announces maintenance state.                            | :kw:`ready_period`. Stonith kills A.                    |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-red:`down`                                           | :c-green:`up`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | Stop daemon on node A                                                                                             |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
|                        |                                                         | stonith :c-red:`not configured`                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               | Services instances are not stopped. The daemon          | Service starts after :kw:`maintenance_grace_period` +   |
|                        | announces maintenance state.                            | :kw:`ready_period`. Fails on resource conflict.         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | Stop daemon on node A                                                                                             |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running` :c-blue:`frozen`              |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               |                                                         |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | Stop daemon on node A                                                                                             |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down` :c-blue:`frozen`                          |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               |                                                         |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | Stop daemon on node A                                                                                             |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-red:`not running`                             |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               |                                                         |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | Stop daemon on node B                                                                                             |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               |                                                         |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+


