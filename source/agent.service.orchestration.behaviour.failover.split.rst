Cluster split
-------------

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | All hb comms down. no quorum.                                                                                     |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running` stonith :c-green:`configured` |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               |                                                         | Service starts after longest :kw:`hb#*.timeout` +       |
|                        |                                                         | :kw:`ready_period`. Stonith executes.                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-red:`down`                                           | :c-green:`up`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | All hb comms down. no quorum.                                                                                     |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
|                        |                                                         | stonith :c-red:`not configured`                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               |                                                         | Service starts after longest :kw:`hb#*.timeout` +       |
|                        |                                                         | :kw:`ready_period`. No resource conflict.               |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-green:`up`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | All hb comms down. no quorum.                                                                                     |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down` :c-blue:`frozen`                          |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               |                                                         |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | All hb comms down. no quorum.                                                                                     |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running` :c-blue:`frozen`              |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               |                                                         |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | All hb comms down. quorum configured. Node A has quorum.                                                          |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               |                                                         |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | All hb comms down. quorum configured. Node A has quorum.                                                          |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down` :c-blue:`frozen`                          |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               |                                                         |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | All hb comms down. quorum configured. Node A has quorum.                                                          |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running` :c-blue:`frozen`              |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               |                                                         |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | All hb comms down. quorum configured. Node B has quorum.                                                          |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               | Commit suicide.                                         | Service starts after longest :kw:`hb#*.timeout` +       |
|                        |                                                         | :kw:`ready_period`.                                     |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-red:`down`                                           | :c-green:`up`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | All hb comms down. quorum configured. Node B has quorum.                                                          |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running`                               |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down` :c-blue:`frozen`                          |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               | Commit suicide.                                         |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-red:`down`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Event                  | All hb comms down. quorum configured. Node B has quorum.                                                          |
+========================+=========================================================+=========================================================+
| Node                   | **A**                                                   | **B**                                                   |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Node State     | daemon :c-green:`running`                               | daemon :c-green:`running` :c-blue:`frozen`              |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Initial Service State  | :c-green:`up`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| Response               | Commit suicide.                                         |                                                         |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+
| End Service State      | :c-red:`down`                                           | :c-red:`down`                                           |
+------------------------+---------------------------------------------------------+---------------------------------------------------------+

